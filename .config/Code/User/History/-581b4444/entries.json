{"version":1,"resource":"file:///usr/lib/python3.13/site-packages/caelestia/utils/wallpaper.py","entries":[{"id":"oary.py","timestamp":1764931771419},{"id":"tfWD.py","timestamp":1764931813694},{"id":"01I4.py","timestamp":1764931842060},{"id":"D5Bv.py","source":"undoRedo.source","timestamp":1764942734414},{"id":"BFKq.py","source":"undoRedo.source","timestamp":1764942779686},{"id":"1MY7.py","source":"Chat Edit: 'def set_wallpaper(wall: Path | str, no_smart: bool) -> None:\n    # Make path absolute\n    wall = Path(wall).resolve()\n\n    if not is_valid_image(wall):\n        raise ValueError(f'\"{wall}\" is not a valid image')\n\n    # Update files\n    wallpaper_path_path.parent.mkdir(parents=True, exist_ok=True)\n    wallpaper_path_path.write_text(str(wall))\n    wallpaper_link_path.parent.mkdir(parents=True, exist_ok=True)\n    wallpaper_link_path.unlink(missing_ok=True)\n    wallpaper_link_path.symlink_to(wall)\n\n    cache = wallpapers_cache_dir / compute_hash(wall)\n\n    # Generate thumbnail or get from cache\n    thumb = get_thumb(wall, cache)\n    wallpaper_thumbnail_path.parent.mkdir(parents=True, exist_ok=True)\n    wallpaper_thumbnail_path.unlink(missing_ok=True)\n    wallpaper_thumbnail_path.symlink_to(thumb)\n\n    scheme = get_scheme()\n\n    # Change mode and variant based on wallpaper colour\n    if scheme.name == \"dynamic\" and not no_smart:\n        smart_opts = get_smart_opts(wall, cache)\n        scheme.mode = smart_opts[\"mode\"]\n        scheme.variant = smart_opts[\"variant\"]\n\n    # Update colours\n    scheme.update_colours()\n    apply_colours(scheme.colours, scheme.mode)\n\n    # Run custom post-hook if configured\n    try:\n        cfg = json.loads(user_config_path.read_text()).get(\"wallpaper\", {})\n        if post_hook := cfg.get(\"postHook\"):\n            subprocess.run(\n                post_hook,\n                shell=True,\n                env={**os.environ, \"WALLPAPER_PATH\": str(wall)},\n                stderr=subprocess.DEVNULL,\n            )\n    except (FileNotFoundError, json.JSONDecodeError):\n        pass\n edit this for out requirement dont remove colour extraction'","timestamp":1764942896862},{"id":"9s3o.py","timestamp":1764942953694},{"id":"XAVW.py","source":"undoRedo.source","timestamp":1764943010199},{"id":"1ZYB.py","timestamp":1764943187408},{"id":"Z9u3.py","timestamp":1764943223947},{"id":"ESfL.py","source":"Chat Edit: 'somehow caelestia wallpaper still working '","timestamp":1764943268129},{"id":"lxkb.py","source":"undoRedo.source","timestamp":1764943371434},{"id":"u7LI.py","source":"undoRedo.source","timestamp":1764943408181}]}